<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>types.jl · Soil dynamics simulator</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Soil dynamics simulator</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>types.jl</a></li><li><a class="tocitem" href="../bucket/">bucket.jl</a></li><li><a class="tocitem" href="../body_soil/">body_soil.jl</a></li><li><a class="tocitem" href="../intersecting_cells/">intersecting_cells.jl</a></li><li><a class="tocitem" href="../relax/">relax.jl</a></li><li><a class="tocitem" href="../utils/">utils.jl</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>types.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>types.jl</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/KennyVilella/soil_dynamics_julia/blob/main/docs/src/types.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Documentation-for-types.jl"><a class="docs-heading-anchor" href="#Documentation-for-types.jl">Documentation for types.jl</a><a id="Documentation-for-types.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation-for-types.jl" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="SoilDynamics.BucketParam" href="#SoilDynamics.BucketParam"><code>SoilDynamics.BucketParam</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BucketParam{T&lt;:Float64}</code></pre><p>Store all parameters related to a bucket object.</p><p><strong>Convention</strong></p><ul><li><p>The bucket is approximated as a triangular prism</p><pre><code class="nohighlight hljs">               A ____________________ D
              /.                     /|
             / .                    / |
            /  .                   /  |
           /   .                  /   |
          /    .                 /    |
         /     .                /     |
        /      .               /      |
       /       C . . . . . .  / . . . F
      /      .               /        ̸
     /     .                /       ̸
    /    .                 /      ̸
   /   .                  /     ̸
  /  .                   /    ̸
 / .                    /   ̸
B ____________________ E</code></pre></li><li><p>The middle of the segment AD is referred to as the bucket &quot;joint&quot;.</p></li><li><p>The middle of the segment CF is referred to as the bucket &quot;base&quot;.</p></li><li><p>The middle of the segment BE is referred to as the bucket &quot;teeth&quot;.</p></li><li><p>The surface ABED is open and referred to as the bucket &quot;front&quot;.</p></li><li><p>The surface BCFE is a bucket wall and referred to as the bucket &quot;base&quot;.</p></li><li><p>The surface ACFD is a bucket wall and referred to as the bucket &quot;back&quot;.</p></li><li><p>The surface ABC is a bucket wall and referred to as the bucket &quot;right side&quot;.</p></li><li><p>The surface DEF is a bucket wall and referred to as the bucket &quot;left side&quot;.</p></li><li><p>The bucket has a constant width, denoted as</p><p>AD = BE = CF = <code>width</code>.</p></li><li><p>The center of rotation of the bucket is assumed to be at the bucket &quot;origin&quot; (not shown in the figure) and the bucket vertices are given relative to this origin.</p></li><li><p>The provided coordinates are assumed to be the reference pose of the bucket, from which the bucket pose is calculated throughout the code.</p></li></ul><p><strong>Fields</strong></p><ul><li><code>j_pos_init::Vector{Float64}</code>: Cartesian coordinates of the bucket joint in its                                reference pose. [m]</li><li><code>b_pos_init::Vector{Float64}</code>: Cartesian coordinates of the bucket base in its                                reference pose. [m]</li><li><code>t_pos_init::Vector{Float64}</code>: Cartesian coordinates of the bucket teeth in its                                reference pose. [m]</li><li><code>width::Float64</code>: Width of the bucket. [m]</li><li><code>pos::Vector{Float64}</code>: Cartesian coordinates of the bucket origin. [m]</li><li><code>ori::Vector{Float64}</code>: Orientation of the bucket. Note that it is stored as a Vector,                         since Quaternions are not mutable. [Quaternion]</li></ul><p><strong>Inner constructor</strong></p><pre><code class="nohighlight hljs">BucketParam(
    o_pos_init::Vector{T}, j_pos_init::Vector{T}, b_pos_init::Vector{T},
    t_pos_init::Vector{T}, width::T
) where {T&lt;:Float64}</code></pre><p>Create a new instance of <code>BucketParam</code> using the reference positions of the bucket origin, joint, base, and teeth as well as the bucket width. The position of the bucket joint, base, and teeth are given relative to the position of the bucket origin.</p><p>Requirements:</p><ul><li>All provided Cartesian coordinates should be a vector of size 3.</li><li>The bucket joint, base and teeth should have strictly different location.</li><li>The bucket width should be greater than zero.</li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">o = [0.0, 0.0, 0.0]
j = [0.0, 0.0, 0.0]
b = [0.0, 0.0, -0.5]
t = [1.0, 0.0, -0.5]

bucket = BucketParam(o, j, b, t, 0.5)</code></pre><p>This would create a bucket ABCDEF with its center of rotation at the bucket joint and with A = [0.0, -0.25, 0.0], B = [1.0, -0.25, -0.5], C = [0.0, -0.25, -0.5] D = [0.0, 0.25, 0.0], E = [1.0, 0.25, -0.5], F = [0.0, 0.25, -0.5].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KennyVilella/soil_dynamics_julia/blob/fb5d88c7f6922bfc8e4074f001a3c6a172d3b7a9/src/types.jl#L156-L240">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SoilDynamics.GridParam" href="#SoilDynamics.GridParam"><code>SoilDynamics.GridParam</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">GridParam{I&lt;:Int64,T&lt;:Float64}</code></pre><p>Store all parameters related to the simulation grid.</p><p><strong>Convention</strong></p><ul><li><p>The simulation grid is centred at 0, that is, if the extent of the grid is 10.0, the grid would then extend from -5.0 to 5.0, this applies to all direction.</p></li><li><p>The grid is composed of regular 3D cells</p><pre><code class="nohighlight hljs">          H-----------G
         /           /|
        /     O     / |
       /           /  |
      E-----------F   C
      |           |  /
      |           | /
      |           |/
      A-----------B</code></pre></li><li><p>The cells have the same size in both lateral direction</p><p>AB = BC = CD = DA = EF = FG = GH = HE,</p><p>while their height can potentially be lower</p><p>AE = BF = CG = DH &lt;= AB.</p></li><li><p>The center of each cell (O) is considered to be at the center of the top surface.</p></li><li><p>The considered reference frame follows the right-hand rule, with the Z direction pointing upward.</p></li></ul><p><strong>Fields</strong></p><ul><li><code>half_length_x::Int64</code>: Number of grid elements in the positive (or negative) X direction.</li><li><code>half_length_y::Int64</code>: Number of grid elements in the positive (or negative) Y direction.</li><li><code>half_length_z::Float64</code>: Number of grid elements in the positive (or negative) Z                           direction. Note that it is a Float.</li><li><code>cell_size_xy::Float64</code>: Size of the cells in the X and Y direction. [m]</li><li><code>cell_size_z::Float64</code>: Height of the cells in the Z direction. [m]</li><li><code>cell_area::Float64</code>: Surface area of one cell in the horizontal plane. [m^2]</li><li><code>cell_volume::Float64</code>: Volume of one cell. [m^3]</li><li><code>vect_x::StepRangeLen{Float64}</code>: Vector providing a conversion between cell&#39;s index and                                  cell&#39;s position in the X direction.</li><li><code>vect_y::StepRangeLen{Float64}</code>: Vector providing a conversion between cell&#39;s index and                                  cell&#39;s position in the Y direction.</li><li><code>vect_z::StepRangeLen{Float64}</code>: Vector providing a conversion between cell&#39;s index and                                  cell&#39;s position in the Z direction.</li></ul><p><strong>Inner constructor</strong></p><pre><code class="nohighlight hljs">GridParam(
    grid_size_x::T, grid_size_y::T, grid_size_z::T, cell_size_xy::T,
    cell_size_z::T=cell_size_xy
) where {T&lt;:Float64}</code></pre><p>Create a new instance of <code>GridParam</code> using the grid size in [m]. The actual size of the grid would be:</p><ul><li>[-grid<em>size</em>x, grid<em>size</em>x] in the X direction.</li><li>[-grid<em>size</em>y, grid<em>size</em>y] in the Y direction.</li><li>[-grid<em>size</em>z, grid<em>size</em>z] in the Z direction.</li></ul><p>Requirements:</p><ul><li>All inputs should be greater than zero.</li><li>cell<em>size</em>xy should be lower than or equal to grid<em>size</em>x and grid<em>size</em>y.</li><li>cell<em>size</em>z should be lower than or equal to grid<em>size</em>z.</li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">grid = GridParam(4.0, 4.0, 3.0, 0.05, 0.01)</code></pre><p>This would create a grid of size [-4, 4] in the X direction, [-4, 4] in the Y direction, [-3, 3] in the Z direction, and with cells of size 0.05 x 0.05 x 0.01 in the XYZ direction.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KennyVilella/soil_dynamics_julia/blob/fb5d88c7f6922bfc8e4074f001a3c6a172d3b7a9/src/types.jl#L9-L82">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SoilDynamics.SimOut" href="#SoilDynamics.SimOut"><code>SoilDynamics.SimOut</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SimOut{B&lt;:Bool,I&lt;:Int64,T&lt;:Float64}</code></pre><p>Store all outputs of the simulation.</p><p><strong>Convention</strong></p><ul><li>The <code>terrain</code> Matrix stores the height of the terrain at each XY position, see the <code>GridParam</code> struct for more information on the simulation grid.</li><li>The cells where a bucket wall is located is stored in <code>body</code>, which is a vector of sparse Matrices. At each XY position, the first sparse Matrix indicates the lowest height where a bucket wall is located while the second sparse Matrix indicates the maximum height of this bucket wall. If a second bucket wall is located at the same XY position, its minimum and maximum height are indicated in the third and fourth sparse Matrix, respectively.</li><li>For each bucket, there can be only two distinct bucket walls located at the same XY position. As a result, the number of sparse Matrices in the <code>body</code> vector should be equal to four times the number of bucket.</li><li>Similarly, <code>body_soil</code> stores the location of the soil resting on a bucket wall. The structure of <code>body_soil</code> is identical to <code>body</code>. An additionnal restriction is that the minimum height of the soil resting on the bucket must correspond to the maximum height of a bucket wall.</li></ul><p><strong>Note</strong></p><ul><li>Currently, only one bucket at a time is supported, but this restriction may be removed in the future.</li><li>Sparse Matrices are used to reduce memory allocation and speed up calculation.</li><li>An attempt has been made to use Dicts instead of sparse Matrices, however Dicts seem to be prohibitively slow in that context, probably due to the size.</li><li><code>equilibrium</code> is a Vector of Bool instead of a Bool to make its value mutable.</li></ul><p><strong>Fields</strong></p><ul><li><code>equilibrium::Vector{Bool}</code>: Indicates whether the terrain is at equilibrium.</li><li><code>terrain::Matrix{Float64}</code>: Height of the terrain. [m]</li><li><code>body::Vector{SparseMatrixCSC{Float64,Int64}}</code>: Store the vertical extension of all                                                 bucket walls for each XY position. [m]</li><li><code>body_soil::Vector{SparseMatrixCSC{Float64,Int64}}</code>: Store the vertical extension of all                                                      soil resting on a bucket wall for                                                      each XY position. [m]</li></ul><p><strong>Inner constructor</strong></p><pre><code class="nohighlight hljs">SimOut(
    terrain::Matrix{T}, grid::GridParam{I,T}
) where {I&lt;:Int64,T&lt;:Float64}</code></pre><p>Create a new instance of <code>SimOut</code> using the provided <code>terrain</code>.</p><p>Requirements:</p><ul><li>The <code>terrain</code> Matrix should be consistent with the grid size.</li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">grid = GridParam(4.0, 4.0, 3.0, 0.05, 0.01)
terrain = zeros(2 * grid.half_length_x + 1, 2 * grid.half_length_y + 1)

out = SimOut(terrain, grid)</code></pre><p>This would create a flat terrain located at 0 height.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KennyVilella/soil_dynamics_julia/blob/fb5d88c7f6922bfc8e4074f001a3c6a172d3b7a9/src/types.jl#L345-L403">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SoilDynamics.SimParam" href="#SoilDynamics.SimParam"><code>SoilDynamics.SimParam</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SimParam{I&lt;:Int64,T&lt;:Float64}</code></pre><p>Store all parameters related to the simulation.</p><p><strong>Note</strong></p><ul><li>The value of <code>max_iterations</code> should be carefully selected. A higher number will result in a <code>terrain</code> closer to equilibrium at the end of each time step, but it may impact significantly the performance of the simulator. A value of 3 is suggested.</li></ul><p><strong>Fields</strong></p><ul><li><code>repose_angle::Float64</code>: The repose angle of the considered soil. [rad]</li><li><code>max_iterations::Int64</code>: The maximum number of relaxation iterations per step.</li></ul><p><strong>Inner constructor</strong></p><pre><code class="nohighlight hljs">SimParam(
    repose_angle::T, max_iterations::I
) where {I&lt;:Int64,T&lt;:Float64}</code></pre><p>Create a new instance of <code>SimParam</code>.</p><p>Requirements:</p><ul><li>The <code>repose_angle</code> should be between 0.0 and pi / 2. The upper limit may be extended in the future.</li><li>The <code>max_iterations</code> should be greater or equal to zero.</li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">sim = SimParam(0.85, 3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KennyVilella/soil_dynamics_julia/blob/fb5d88c7f6922bfc8e4074f001a3c6a172d3b7a9/src/types.jl#L291-L321">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../bucket/">bucket.jl »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 8 June 2023 00:15">Thursday 8 June 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
